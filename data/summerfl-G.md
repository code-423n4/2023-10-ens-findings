1. The problem lies in line 87 of ERC20MultiDelegate.sol, which is "transferIndex < Math.max(sourcesLength, TargetsLength);". And the code in lines 79-82 shows that "Math.max(sourcesLength, TargetsLength)" should be equal to the memory variable "amountsLength". So using "amountsLength" instead of the code "Math.max(sourcesLength, TargetsLength)" can save gas because this behavior occurs in the for loop.